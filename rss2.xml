<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>方寸之间</title>
    <link>http://yoursite.com/</link>
    <atom:link href="/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description>天地有大美而不言，四时有明法而不议，万物有成理而不说。</description>
    <pubDate>Mon, 24 Dec 2018 10:10:35 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>Material Design Button</title>
      <link>http://yoursite.com/2018/12/24/material-design-button/</link>
      <guid>http://yoursite.com/2018/12/24/material-design-button/</guid>
      <pubDate>Mon, 24 Dec 2018 09:13:14 GMT</pubDate>
      <description>
      
        
        
          &lt;p&gt;Android中Button的默认颜色为灰色,并且带有默认的点击效果,在5.0以上的系统还有涟漪的效果。通常在开发时我们都会修改Button的颜色,最常用的方式就是修改Button的背景颜色,即“android:background”;只是修改简单的修改背景颜色的话Butt
        
      
      </description>
      
      <content:encoded><![CDATA[<p>Android中Button的默认颜色为灰色,并且带有默认的点击效果,在5.0以上的系统还有涟漪的效果。通常在开发时我们都会修改Button的颜色,最常用的方式就是修改Button的背景颜色,即“android:background”;只是修改简单的修改背景颜色的话Button就没有点击效果,这时我们一般会使用selector来实现点击效果;这样处理不仅会增加工作量,也会丢失掉5.0以上系统的涟漪效果。</p><h2 id="使用Style修改Button颜色并保持默认点击效果"><a href="#使用Style修改Button颜色并保持默认点击效果" class="headerlink" title="使用Style修改Button颜色并保持默认点击效果"></a>使用Style修改Button颜色并保持默认点击效果</h2><p>Android中我们也可以通过Style来设置Button的样式</p><h3 id="Style中Button样式的设置"><a href="#Style中Button样式的设置" class="headerlink" title="Style中Button样式的设置"></a>Style中Button样式的设置</h3><p>首先我们需要查看默认的Button样式是如何设置的,在<code>.../res/styles.xml</code>文件中我们可以看到应用默认的style</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"AppTheme"</span> <span class="attr">parent</span>=<span class="string">"Theme.AppCompat.Light.DarkActionBar"</span>&gt;</span><span class="xml"> </span></div><div class="line"><span class="comment">&lt;!-- Customize your theme here. --&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimary"</span>&gt;</span>@color/colorPrimary<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimaryDark"</span>&gt;</span>@color/colorPrimaryDark<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorAccent"</span>&gt;</span>@color/colorAccent<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure><p>按住command键点击<code>Theme.AppCompat.Light.DarkActionBar</code>,或者选中按“command+B”快捷键继续跟踪查看</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"Theme.AppCompat.Light.DarkActionBar"</span> <span class="attr">parent</span>=<span class="string">"Base.Theme.AppCompat.Light.DarkActionBar"</span>/&gt;</span><span class="undefined"></span></div></pre></td></tr></table></figure><p>继续跟踪查看<code>Base.Theme.AppCompat.Light.DarkActionBar</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"Base.Theme.AppCompat.Light.DarkActionBar"</span> <span class="attr">parent</span>=<span class="string">"Base.Theme.AppCompat.Light"</span>&gt;</span><span class="xml"> </span></div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"actionBarPopupTheme"</span>&gt;</span>@style/ThemeOverlay.AppCompat.Light<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"actionBarWidgetTheme"</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"actionBarTheme"</span>&gt;</span>@style/ThemeOverlay.AppCompat.Dark.ActionBar<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="comment">&lt;!-- Panel attributes --&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"listChoiceBackgroundIndicator"</span>&gt;</span>@drawable/abc_list_selector_holo_dark<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimaryDark"</span>&gt;</span>@color/primary_dark_material_dark<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimary"</span>&gt;</span>@color/primary_material_dark<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure><p>继续跟踪查看<code>Base.Theme.AppCompat.Light</code>时会提示有不同版本,通过一个个跟踪查看可以知道,最终继承的parent style都是<code>Base.V7.Theme.AppCompat.Light</code>,在<code>Base.V7.Theme.AppCompat.Light</code>中可以找到对Button样式的定义</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"Base.V7.Theme.AppCompat.Light"</span> <span class="attr">parent</span>=<span class="string">"Platform.AppCompat.Light"</span>&gt;</span><span class="xml"> </span></div><div class="line">... </div><div class="line"><span class="comment">&lt;!-- Button styles --&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"buttonStyle"</span>&gt;</span>@style/Widget.AppCompat.Button<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"buttonStyleSmall"</span>&gt;</span>@style/Widget.AppCompat.Button.Small<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:textAppearanceButton"</span>&gt;</span>@style/TextAppearance.AppCompat.Widget.Button<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line">... </div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure><p>其中有设置了buttonStyle,继续跟踪查看<code>Widget.AppCompat.Button</code></p><p>有values.xml和values-v21.xml</p><blockquote><p>values.xml</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"Base.Widget.AppCompat.Button"</span> <span class="attr">parent</span>=<span class="string">"android:Widget"</span>&gt;</span><span class="xml"></span></div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:background"</span>&gt;</span>@drawable/abc_btn_default_mtrl_shape<span class="tag">&lt;/<span class="name">item</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:textAppearance"</span>&gt;</span>?android:attr/textAppearanceButton<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:minHeight"</span>&gt;</span>48dip<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:minWidth"</span>&gt;</span>88dip<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:focusable"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:clickable"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:gravity"</span>&gt;</span>center_vertical|center_horizontal<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure><blockquote><p>values-v21.xml</p></blockquote><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"Base.Widget.AppCompat.Button"</span> <span class="attr">parent</span>=<span class="string">"android:Widget.Material.Button"</span>/&gt;</span><span class="xml"> </span></div><div class="line">... </div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"Widget.Material.Button"</span>&gt;</span><span class="xml"> </span></div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"background"</span>&gt;</span>@drawable/btn_default_material<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"textAppearance"</span>&gt;</span>?attr/textAppearanceButton<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"minHeight"</span>&gt;</span>48dip<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"minWidth"</span>&gt;</span>88dip<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"stateListAnimator"</span>&gt;</span>@anim/button_state_list_anim_material<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"focusable"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"clickable"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"gravity"</span>&gt;</span>center_vertical|center_horizontal<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure><p>可以看到针对不同版本分别设置了Button的样式。 </p><h3 id="btttonStyle中颜色的设置"><a href="#btttonStyle中颜色的设置" class="headerlink" title="btttonStyle中颜色的设置"></a>btttonStyle中颜色的设置</h3><p>通过分析Style,可以知道通过buttonStyle来指定Button的样式</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"AppTheme"</span> <span class="attr">parent</span>=<span class="string">"Theme.AppCompat.Light.DarkActionBar"</span>&gt;</span><span class="xml"> </span></div><div class="line"><span class="comment">&lt;!-- Customize your theme here. --&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimary"</span>&gt;</span>@color/colorPrimary<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimaryDark"</span>&gt;</span>@color/colorPrimaryDark<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorAccent"</span>&gt;</span>@color/colorAccent<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="comment">&lt;!-- 设置button的Style --&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"buttonStyle"</span>&gt;</span>@style/Xxx<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure><p>在V7支持包中,提供了5个预置的Button的Style,如下:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"Widget.AppCompat.Button"</span> <span class="attr">parent</span>=<span class="string">"Base.Widget.AppCompat.Button"</span>/&gt;</span><span class="xml"> </span></div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"Widget.AppCompat.Button.Small"</span> <span class="attr">parent</span>=<span class="string">"Base.Widget.AppCompat.Button.Small"</span>/&gt;</span><span class="xml"> </span></div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"Widget.AppCompat.Button.Colored"</span> <span class="attr">parent</span>=<span class="string">"Base.Widget.AppCompat.Button.Colored"</span>/&gt;</span><span class="xml"> </span></div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"Widget.AppCompat.Button.Borderless"</span> <span class="attr">parent</span>=<span class="string">"Base.Widget.AppCompat.Button.Borderless"</span>/&gt;</span><span class="xml"> </span></div><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"Widget.AppCompat.Button.Borderless.Colored"</span> <span class="attr">parent</span>=<span class="string">"Base.Widget.AppCompat.Button.Borderless.Colored"</span>/&gt;</span><span class="undefined"></span></div></pre></td></tr></table></figure><p><img src="image.jpeg" alt="imgae"></p><h3 id="通过buttonStyle修改Button颜色"><a href="#通过buttonStyle修改Button颜色" class="headerlink" title="通过buttonStyle修改Button颜色"></a>通过buttonStyle修改Button颜色</h3><h4 id="全局Button设置"><a href="#全局Button设置" class="headerlink" title="全局Button设置"></a>全局Button设置</h4><p>直接在应用主题中设置buttonStyle,然后通过相应的属性修改Button的背景色或文字颜色,如下:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"AppTheme"</span> <span class="attr">parent</span>=<span class="string">"Theme.AppCompat.Light.DarkActionBar"</span>&gt;</span><span class="xml"> </span></div><div class="line"><span class="comment">&lt;!-- Customize your theme here. --&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimary"</span>&gt;</span>@color/colorPrimary<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorPrimaryDark"</span>&gt;</span>@color/colorPrimaryDark<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorAccent"</span>&gt;</span>@color/colorAccent<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"buttonStyle"</span>&gt;</span>@style/Widget.AppCompat.Button<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorButtonNormal"</span>&gt;</span>@color/colorBlue<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure><h4 id="单个Button设置"><a href="#单个Button设置" class="headerlink" title="单个Button设置"></a>单个Button设置</h4><p>在styles.xml文件中添加一个style,修改Button的背景色或文字颜色,然后在需要修改的layout的Button中添加<code>android:theme=&quot;@style/RedButton&quot;</code>属性即可,如下:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">"RedButton"</span> <span class="attr">parent</span>=<span class="string">"AppTheme"</span>&gt;</span><span class="xml"> </span></div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"buttonStyle"</span>&gt;</span>@style/Widget.AppCompat.Button<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"colorButtonNormal"</span>&gt;</span>@color/colorRed<span class="tag">&lt;/<span class="name">item</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div></pre></td></tr></table></figure><p>在layout中使用:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">Button</span> </span></div><div class="line"><span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span> </div><div class="line"><span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> </div><div class="line"><span class="attr">android:text</span>=<span class="string">"Button_1"</span> </div><div class="line"><span class="attr">android:theme</span>=<span class="string">"@style/RedButton"</span> /&gt; </div><div class="line"><span class="comment">&lt;!-- 注意是android:theme属性,不是style属性 --&gt;</span></div></pre></td></tr></table></figure><h3 id="修改Button圆角大小"><a href="#修改Button圆角大小" class="headerlink" title="修改Button圆角大小"></a>修改Button圆角大小</h3><p>目前只找到了全局修改Button圆角大小的方法,<br>在<code>dimes.xml</code>文件中复写<code>abc_control_corner_material</code>的值,可以修改应用内所有Button的圆角大小</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;dimen name=&quot;abc_control_corner_material&quot; tools:override=&quot;true&quot;&gt;8dp&lt;/dimen&gt;</div></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>http://yoursite.com/2018/12/24/material-design-button/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Activity Translucent</title>
      <link>http://yoursite.com/2018/11/21/Activity-Translucent/</link>
      <guid>http://yoursite.com/2018/11/21/Activity-Translucent/</guid>
      <pubDate>Wed, 21 Nov 2018 02:59:47 GMT</pubDate>
      <description>
      
        
        
          &lt;h1 id=&quot;Activity-透明主题&quot;&gt;&lt;a href=&quot;#Activity-透明主题&quot; class=&quot;headerlink&quot; title=&quot;Activity 透明主题&quot;&gt;&lt;/a&gt;Activity 透明主题&lt;/h1&gt;&lt;figure class=&quot;highlight plai
        
      
      </description>
      
      <content:encoded><![CDATA[<h1 id="Activity-透明主题"><a href="#Activity-透明主题" class="headerlink" title="Activity 透明主题"></a>Activity 透明主题</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;style name=&quot;PopupContainer&quot;&gt;</div><div class="line">    &lt;item name=&quot;android:windowBackground&quot;&gt;@color/translucent&lt;/item&gt;</div><div class="line">    &lt;item name=&quot;android:colorBackgroundCacheHint&quot;&gt;@null&lt;/item&gt;</div><div class="line">    &lt;item name=&quot;android:windowContentOverlay&quot;&gt;@null&lt;/item&gt;</div><div class="line">    &lt;item name=&quot;android:windowIsTranslucent&quot;&gt;true&lt;/item&gt;</div><div class="line">    &lt;item name=&quot;android:windowDrawsSystemBarBackgrounds&quot;&gt;true&lt;/item&gt;</div><div class="line">    &lt;item name=&quot;android:statusBarColor&quot;&gt;@color/translucent&lt;/item&gt;</div><div class="line">&lt;/style&gt;</div></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>http://yoursite.com/2018/11/21/Activity-Translucent/#disqus_thread</comments>
    </item>
    
    <item>
      <title>tomcat on mac </title>
      <link>http://yoursite.com/2017/06/26/tomcat-on-mac/</link>
      <guid>http://yoursite.com/2017/06/26/tomcat-on-mac/</guid>
      <pubDate>Mon, 26 Jun 2017 12:34:27 GMT</pubDate>
      <description>
      
        &lt;h1 id=&quot;Mac-下安装配置Tomcat&quot;&gt;&lt;a href=&quot;#Mac-下安装配置Tomcat&quot; class=&quot;headerlink&quot; title=&quot;Mac 下安装配置Tomcat&quot;&gt;&lt;/a&gt;Mac 下安装配置Tomcat&lt;/h1&gt;&lt;h2 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h2&gt;&lt;p&gt;去&lt;a href=&quot;http://tomcat.apache.org/download-70.cgi&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Apache Tomcat&lt;/a&gt;上下载一个Tomcat。&lt;br&gt;我下载的是7.0.78版本&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;tomcat20170622.png&quot; alt=&quot;tom&quot;&gt;&lt;/p&gt;
&lt;p&gt;下载完，放到根目录下；/Library/Tomcat&lt;/p&gt;
&lt;p&gt;设置运行脚本权限&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;sudo chmod 755  /Library/Tomcat/bin/*.sh&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;启动&quot;&gt;&lt;a href=&quot;#启动&quot; class=&quot;headerlink&quot; title=&quot;启动&quot;&gt;&lt;/a&gt;启动&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;sudo sh /Library/Tomcat/bin/startup.sh&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;成功的话会出现：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;➜  ~ tomcat start&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Using CATALINA_BASE:   /Library/Tomcat&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Using CATALINA_HOME:   /Library/Tomcat&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Using CATALINA_TMPDIR: /Library/Tomcat/temp&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Using JRE_HOME:        /Library/Java/JavaVirtualMachines/jdk1.8.0_91.jdk/Contents/Home&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Using CLASSPATH:       /Library/Tomcat/bin/bootstrap.jar:/Library/Tomcat7078/bin/tomcat-juli.jar&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;Tomcat started.&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h1 id="Mac-下安装配置Tomcat"><a href="#Mac-下安装配置Tomcat" class="headerlink" title="Mac 下安装配置Tomcat"></a>Mac 下安装配置Tomcat</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>去<a href="http://tomcat.apache.org/download-70.cgi" target="_blank" rel="external">Apache Tomcat</a>上下载一个Tomcat。<br>我下载的是7.0.78版本</p><p><img src="tomcat20170622.png" alt="tom"></p><p>下载完，放到根目录下；/Library/Tomcat</p><p>设置运行脚本权限</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo chmod 755  /Library/Tomcat/bin/*.sh</div></pre></td></tr></table></figure><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo sh /Library/Tomcat/bin/startup.sh</div></pre></td></tr></table></figure><p>成功的话会出现：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">➜  ~ tomcat start</div><div class="line">Using CATALINA_BASE:   /Library/Tomcat</div><div class="line">Using CATALINA_HOME:   /Library/Tomcat</div><div class="line">Using CATALINA_TMPDIR: /Library/Tomcat/temp</div><div class="line">Using JRE_HOME:        /Library/Java/JavaVirtualMachines/jdk1.8.0_91.jdk/Contents/Home</div><div class="line">Using CLASSPATH:       /Library/Tomcat/bin/bootstrap.jar:/Library/Tomcat7078/bin/tomcat-juli.jar</div><div class="line">Tomcat started.</div></pre></td></tr></table></figure><a id="more"></a><p>打开浏览器输入：localhost8080 ,就可以看见tom猫这个页面</p><p><img src="tomcat201706221.png" alt="tomcat home page"></p><h2 id="配置快捷命令"><a href="#配置快捷命令" class="headerlink" title="配置快捷命令"></a>配置快捷命令</h2><p>这样每次启动太麻烦了，没次都要跑到library去启动tomcat的shel脚本</p><p>在终端的包含路径下（如/usr/local/bin），下新建一个tomcat的文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">➜ /usrlocal/bin &gt;sudo touch tomcat</div></pre></td></tr></table></figure><p>打开这个文件，配置shell脚本,然后保存</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">case $1 in</div><div class="line">start)</div><div class="line">sh /Library/Tomcat/bin/startup.sh</div><div class="line">;;</div><div class="line">stop)</div><div class="line">sh /Library/Tomcat/bin/shutdown.sh</div><div class="line">;;</div><div class="line">restart)</div><div class="line">sh /Library/Tomcat/bin/shutdown.sh</div><div class="line">sh /Library/Tomcat/bin/startup.sh</div><div class="line">;;</div><div class="line">*)</div><div class="line">echo “Usage: start|stop|restart”</div><div class="line">;;</div><div class="line">esac</div><div class="line">exit 0</div></pre></td></tr></table></figure><p>快捷命令如下：</p><ol><li>tomcat start</li><li>tomcat stop</li><li>tomcat restart</li></ol><h2 id="管理Mac-OS自带的Apache"><a href="#管理Mac-OS自带的Apache" class="headerlink" title="管理Mac OS自带的Apache"></a>管理Mac OS自带的Apache</h2><p>###Mac OS X 内置了Apache 和 PHP</p><blockquote><p>管理方法一：</p></blockquote><p>打开“系统设置偏好（System Preferences）” -&gt; “共享（Sharing）” -&gt; “Web共享（Web Sharing）”</p><blockquote><p>管理方法二：</p></blockquote><ol><li>启动Apache：运行“sudo apachectl start”，再输入root帐号密码</li><li>停止Apache：运行“sudo apachectl stop”，</li><li>查看Apache：版本：运行“sudo apachectl －v”，</li><li>重启Apache：运行“sudo apachectl restart”</li></ol><h3 id="Mac-OS中Apache文件默认存放位置"><a href="#Mac-OS中Apache文件默认存放位置" class="headerlink" title="Mac OS中Apache文件默认存放位置"></a>Mac OS中Apache文件默认存放位置</h3><p>Mac OS 的Apache2的配置文件（httpd.config）保存在/etc/apache2</p><p>Mac OS 的Apache2的程序文件（httpd, ab） 保存在/usr/sbin/</p><p>Mac OS 的Apache2的默认根目录：/Library/WebServer/Documents</p><p>修改Apache2的配置文件，在终端运行“sudo vi /etc/apache2/httpd.conf”，打开Apche的配置文件进行修改。</p>]]></content:encoded>
      
      <comments>http://yoursite.com/2017/06/26/tomcat-on-mac/#disqus_thread</comments>
    </item>
    
    <item>
      <title>创建一个可维护的Android Client</title>
      <link>http://yoursite.com/2017/05/11/retrofit-creating-a-sustainable-android-client/</link>
      <guid>http://yoursite.com/2017/05/11/retrofit-creating-a-sustainable-android-client/</guid>
      <pubDate>Thu, 11 May 2017 02:54:08 GMT</pubDate>
      <description>
      
        &lt;p&gt;原文&lt;a href=&quot;https://futurestud.io/tutorials/retrofit-2-creating-a-sustainable-android-client&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://futurestud.io/tutorials/retrofit-2-creating-a-sustainable-android-client&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Retrofit 提供了广泛的功能，有很多可能的配置。很多大型应用程序需要一些特定的设置，例如OAuth认证。为了实现简洁和稳定的项目，我们向您介绍我们的想法：一个可维护的&lt;code&gt;ServiceGenerator&lt;/code&gt; Android客户端。&lt;/p&gt;
&lt;h2 id=&quot;ServiceGenerator&quot;&gt;&lt;a href=&quot;#ServiceGenerator&quot; class=&quot;headerlink&quot; title=&quot;ServiceGenerator&quot;&gt;&lt;/a&gt;ServiceGenerator&lt;/h2&gt;&lt;p&gt;正如您知道{% post_link retrofit-getting-started 开始教程 %}，Retrofit 对象和它的builder是所有请求的核心。在这里您配置您的请求、响应、身份验证、日志记录和错误处理。不幸的是，我们已经看到太多的开发人员只是复制和粘贴这些部分，而不是分离成一个简洁的类。    &lt;code&gt;ServiceGenerator&lt;/code&gt;将会给我们一个解决方案，这源于&lt;a href=&quot;https://github.com/bkiers/retrofit-oauth/tree/master/src/main/java/nl/bigo/retrofitoauth&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Bart Kiers的想法&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;让我们从简单的代码开始。在当前状态下，它只定义了一个方法来创建一个给定的class/interface REST客户端，从接口返回一个service类。&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>原文<a href="https://futurestud.io/tutorials/retrofit-2-creating-a-sustainable-android-client" target="_blank" rel="external">https://futurestud.io/tutorials/retrofit-2-creating-a-sustainable-android-client</a></p><p>Retrofit 提供了广泛的功能，有很多可能的配置。很多大型应用程序需要一些特定的设置，例如OAuth认证。为了实现简洁和稳定的项目，我们向您介绍我们的想法：一个可维护的<code>ServiceGenerator</code> Android客户端。</p><h2 id="ServiceGenerator"><a href="#ServiceGenerator" class="headerlink" title="ServiceGenerator"></a>ServiceGenerator</h2><p>正如您知道{% post_link retrofit-getting-started 开始教程 %}，Retrofit 对象和它的builder是所有请求的核心。在这里您配置您的请求、响应、身份验证、日志记录和错误处理。不幸的是，我们已经看到太多的开发人员只是复制和粘贴这些部分，而不是分离成一个简洁的类。    <code>ServiceGenerator</code>将会给我们一个解决方案，这源于<a href="https://github.com/bkiers/retrofit-oauth/tree/master/src/main/java/nl/bigo/retrofitoauth" target="_blank" rel="external">Bart Kiers的想法</a>。</p><p>让我们从简单的代码开始。在当前状态下，它只定义了一个方法来创建一个给定的class/interface REST客户端，从接口返回一个service类。</p><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceGenerator</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String BASE_URL = <span class="string">"https://api.github.com/"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Retrofit.Builder builder =</div><div class="line">            <span class="keyword">new</span> Retrofit.Builder()</div><div class="line">                    .baseUrl(BASE_URL)</div><div class="line">                    .addConverterFactory(GsonConverterFactory.create());</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Retrofit retrofit = builder.build();</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> OkHttpClient.Builder httpClient =</div><div class="line">            <span class="keyword">new</span> OkHttpClient.Builder();</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;S&gt; <span class="function">S <span class="title">createService</span><span class="params">(</span></span></div><div class="line">        Class&lt;S&gt; serviceClass) &#123;</div><div class="line">        <span class="keyword">return</span> retrofit.create(serviceClass);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><code>ServiceGenerator</code>类使用Retorfit的Builder与给定的API库的URL（BASE_URL）创建一个新的REST客户端。例如，GitHub的API库的URL是<code>https://api.github.com/</code>。</p><p><code>createService</code>方法需要一个<code>serviceClass</code>作为参数创建并它的Class对象。获取到对象后，就可以执行网络请求了。</p><h2 id="为什么ServiceGenerator里的东西都是静态的？"><a href="#为什么ServiceGenerator里的东西都是静态的？" class="headerlink" title="为什么ServiceGenerator里的东西都是静态的？"></a>为什么ServiceGenerator里的东西都是静态的？</h2><p>您可能会奇怪为什么我们使用静态字段和方法在ServiceGenerator类里面。实际上，它有一个简单的原因：在整个应用程序中我们要使用相同的对象（例如：<code>OkHttpClient</code>，<code>Retrofit</code>，…），打开一个socket连接处理所有的请求和响应，包括缓存和更多功能（通常大家都这么做）。</p><p>此外，为了加快速度，我们可以在移动设备上节省一点点宝贵的内存，而不必一次又一次重复创建相同的对象。所以我们需要标记所有字段和方法是静态的</p><h2 id="使用-ServiceGenerator"><a href="#使用-ServiceGenerator" class="headerlink" title="使用 ServiceGenerator"></a>使用 ServiceGenerator</h2><p>还记得{% post_link retrofit-getting-started 开始教程 %}我们代码是怎样的吗？</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">String API_BASE_URL = <span class="string">"https://api.github.com/"</span>;</div><div class="line"></div><div class="line">OkHttpClient.Builder httpClient = <span class="keyword">new</span> OkHttpClient.Builder();</div><div class="line"></div><div class="line">Retrofit.Builder builder =  </div><div class="line">    <span class="keyword">new</span> Retrofit.Builder()</div><div class="line">            .baseUrl(API_BASE_URL)</div><div class="line">            .addConverterFactory(</div><div class="line">                GsonConverterFactory.create()</div><div class="line">            );</div><div class="line"></div><div class="line">Retrofit retrofit =  </div><div class="line">    builder</div><div class="line">        .client(</div><div class="line">            httpClient.build()</div><div class="line">        )</div><div class="line">        .build();</div><div class="line"></div><div class="line">GitHubClient client = retrofit.create(GitHubClient.class);</div></pre></td></tr></table></figure><p>对于一个请求，这看起来很好。只是，如果您的应用程序中有几十个网络请求，这管理起来将是一个噩梦。我们的<code>ServiceGenerator</code>，只需要一行代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">GitHubClient client = ServiceGenerator.createService(GitHubClient.class);</div></pre></td></tr></table></figure><p>所有的准备工作都移到我们的<code>ServiceGenerator</code>。</p><p>不幸的是，在大多数情况下，ServiceGenerator不能一直这样简单。因此，上面的代码只是给您一个起点。您需要适应您的需求，就像我们在其他教程里做的一样。然后，在接下来的两个章节中我们将探讨一些可能的变化。</p><h2 id="准备-Logging-日志"><a href="#准备-Logging-日志" class="headerlink" title="准备 Logging 日志"></a>准备 Logging 日志</h2><p>开发者最常见的愿望之一是想知道Retrofit实际上发送和接收的数据是什么样的。我们有一个完整的教程专用于<a href="https://futurestud.io/tutorials/retrofit-2-log-requests-and-responses" target="_blank" rel="external">Retrofit与logging</a>，在这里您可以知道得更多。</p><p>Retorift的logging日志通过回调一个<code>HttpLoggingInterceptor</code>拦截器。您需要添加这个拦截器实例到<code>OkHttpClient</code>。如下所示:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceGenerator</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String BASE_URL = <span class="string">"https://api.github.com/"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Retrofit.Builder builder =</div><div class="line">            <span class="keyword">new</span> Retrofit.Builder()</div><div class="line">                    .baseUrl(BASE_URL)</div><div class="line">                    .addConverterFactory(GsonConverterFactory.create());</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Retrofit retrofit = builder.build();</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> HttpLoggingInterceptor logging =</div><div class="line">            <span class="keyword">new</span> HttpLoggingInterceptor()</div><div class="line">                    .setLevel(HttpLoggingInterceptor.Level.BODY);</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> OkHttpClient.Builder httpClient =</div><div class="line">            <span class="keyword">new</span> OkHttpClient.Builder();</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;S&gt; <span class="function">S <span class="title">createService</span><span class="params">(</span></span></div><div class="line">        Class&lt;S&gt; serviceClass) &#123;</div><div class="line">        <span class="keyword">if</span> (!httpClient.interceptors().contains(logging)) &#123;</div><div class="line">            httpClient.addInterceptor(logging);</div><div class="line">            builder.client(httpClient.build());</div><div class="line">            retrofit = builder.build();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> retrofit.create(serviceClass);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>有几件事您必须意识到。首先，确保不要多次加入拦截器！如果日志拦截器已经存在，我们用<code>httpClient.interceptors().contains(logging)</code>检查。其次，确保不要每一次调用<code>createSercice</code>的时候都去build <code>retrofit</code> 对象。否则的话<code>ServiceGenerator</code>就失去他的作用了。</p><h2 id="准备认证"><a href="#准备认证" class="headerlink" title="准备认证"></a>准备认证</h2><p>认证的要求有点不同。您可以在我们的教程<a href="https://futurestud.io/tutorials/android-basic-authentication-with-retrofit" target="_blank" rel="external">基本身份验证</a>，<a href="https://futurestud.io/tutorials/retrofit-token-authentication-on-android" target="_blank" rel="external">Token 认证</a>，<a href="https://futurestud.io/tutorials/oauth-2-on-android-with-retrofit" target="_blank" rel="external">OAuth</a>，甚至<a href="https://futurestud.io/tutorials/retrofit-2-hawk-authentication-on-android" target="_blank" rel="external">Hawk 认证</a>中去学习更多的认证。对于每一个认证的实现细节是有点不同的，您可能会改变<code>ServiceGenerator</code>。其中一个变化是，您需要通过额外的参数来<code>createService</code>创建一个客户端。</p><p>让我们看一个 Hawk 认证的例子：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServiceGenerator</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String BASE_URL = <span class="string">"https://api.github.com/"</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Retrofit.Builder builder =</div><div class="line">            <span class="keyword">new</span> Retrofit.Builder()</div><div class="line">                    .baseUrl(BASE_URL)</div><div class="line">                    .addConverterFactory(GsonConverterFactory.create());</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Retrofit retrofit = builder.build();</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> HttpLoggingInterceptor logging =</div><div class="line">            <span class="keyword">new</span> HttpLoggingInterceptor()</div><div class="line">                    .setLevel(HttpLoggingInterceptor.Level.BODY);</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> OkHttpClient.Builder httpClient =</div><div class="line">            <span class="keyword">new</span> OkHttpClient.Builder();</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;S&gt; <span class="function">S <span class="title">createService</span><span class="params">(</span></span></div><div class="line">            Class&lt;S&gt; serviceClass, <span class="keyword">final</span> HawkCredentials credentials) &#123;</div><div class="line">        <span class="keyword">if</span> (credentials != <span class="keyword">null</span>) &#123;</div><div class="line">            HawkAuthenticationInterceptor interceptor =</div><div class="line">                    <span class="keyword">new</span> HawkAuthenticationInterceptor(credentials);</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (!httpClient.interceptors().contains(interceptor)) &#123;</div><div class="line">                httpClient.addInterceptor(interceptor);</div><div class="line"></div><div class="line">                builder.client(httpClient.build());</div><div class="line">                retrofit = builder.build();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> retrofit.create(serviceClass);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>我们的<code>createService</code>现在有两个参数(<code>HawkCredentials</code>)。如果传递一个非空值，它将创建必要的Hawk身份验证拦截器并将其添加到Retrofit客户端。我们还需要rebuild Retrofit，以应用我们的变化到下一个请求。</p><p>一抬头，您可能会在其他教程中看到<code>ServiceGenerator</code>不同版本。不要混淆！我们也建议您保持您的<code>ServiceGenerator</code>简洁和专门的使用情况！</p><h2 id="接下来是什么"><a href="#接下来是什么" class="headerlink" title="接下来是什么"></a>接下来是什么</h2><p>在本教程中，您已经了解到为什么推荐集中生成您的Retrofit客户端。您见过一个方法您可以用<code>ServiceGenerator</code>类实现它。不过，您可能不得不调整您的目的。</p><p>如果您有反馈或问题，请在评论中让我们知道或<a href="https://futurestud.io/tutorials/twitter.com/futurestud_io" target="_blank" rel="external">@ futurestud_io</a>。</p><p>Make it rock &amp; enjoy coding!</p>]]></content:encoded>
      
      <comments>http://yoursite.com/2017/05/11/retrofit-creating-a-sustainable-android-client/#disqus_thread</comments>
    </item>
    
    <item>
      <title>Ruby on Rails 笔记</title>
      <link>http://yoursite.com/2017/05/11/ruby-on-rails-note/</link>
      <guid>http://yoursite.com/2017/05/11/ruby-on-rails-note/</guid>
      <pubDate>Thu, 11 May 2017 01:56:46 GMT</pubDate>
      <description>
      
        &lt;p&gt;学习rails时记下的笔记&lt;/p&gt;
&lt;h2 id=&quot;Rails-环境&quot;&gt;&lt;a href=&quot;#Rails-环境&quot; class=&quot;headerlink&quot; title=&quot;Rails 环境&quot;&gt;&lt;/a&gt;Rails 环境&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;rails console					# Loading development environment&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;rails console test				# Loading test environment&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;rails console production			# Loading production environment&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;rails console --sandbox				# sandbox&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;rails server --environment production		# server production&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;controller-plural&quot;&gt;&lt;a href=&quot;#controller-plural&quot; class=&quot;headerlink&quot; title=&quot;controller [plural]&quot;&gt;&lt;/a&gt;controller [plural]&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;rails generate controller Sessions home help		# generate 命令可以接收一个可选的参数列表,创建首页、帮助页面&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;rails generate controller PasswordResets new edit --no-test-framework&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;rails destroy  controller StaticPages 			# 撤销staticpages controller&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;rails destroy  controller StaticPages home help&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>学习rails时记下的笔记</p><h2 id="Rails-环境"><a href="#Rails-环境" class="headerlink" title="Rails 环境"></a>Rails 环境</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">rails console# Loading development environment</div><div class="line">rails console test# Loading test environment</div><div class="line">rails console production# Loading production environment</div><div class="line">rails console --sandbox# sandbox</div><div class="line"></div><div class="line">rails server --environment production# server production</div></pre></td></tr></table></figure><h2 id="controller-plural"><a href="#controller-plural" class="headerlink" title="controller [plural]"></a>controller [plural]</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">rails generate controller Sessions home help# generate 命令可以接收一个可选的参数列表,创建首页、帮助页面</div><div class="line">rails generate controller PasswordResets new edit --no-test-framework</div><div class="line"></div><div class="line">rails destroy  controller StaticPages # 撤销staticpages controller</div><div class="line">rails destroy  controller StaticPages home help</div></pre></td></tr></table></figure><a id="more"></a><h2 id="model"><a href="#model" class="headerlink" title="model"></a>model</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rails generate model User name:string email:string</div><div class="line">rails destroy model User</div></pre></td></tr></table></figure><h2 id="migration"><a href="#migration" class="headerlink" title="migration"></a>migration</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">rails generate migration add_index_to_users_email# generate migration index</div><div class="line">rails generate migration add_admin_to_users admin:boolean# add filed</div><div class="line">rails generate migration add_password_digest_to_users password_digest:string</div><div class="line">rails generate migration add_reset_to_users reset_digest:string reset_sent_at:datetime</div></pre></td></tr></table></figure><h3 id="执行-migrate"><a href="#执行-migrate" class="headerlink" title="执行 migrate"></a>执行 migrate</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">rails db:migrate</div><div class="line">rails db:rollback</div><div class="line">rails db:migrate VERSION=0</div><div class="line">rails db:migrate:reset#reset db</div></pre></td></tr></table></figure><h2 id="integration-test模版"><a href="#integration-test模版" class="headerlink" title="integration_test模版"></a>integration_test模版</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rails generate integration_test site_layout</div><div class="line">rails generate integration_test users_signup</div></pre></td></tr></table></figure><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>测试驱动开发使用“遇红-变绿-重构”循环</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">rails test</div><div class="line">rails test:integration# 只执行集成测试</div><div class="line">rails test:models# 执行model测试【待验证】</div><div class="line">rails test test/integration/users_login_test.rb# 执行单个文件测试</div></pre></td></tr></table></figure><h2 id="mailer"><a href="#mailer" class="headerlink" title="mailer"></a>mailer</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rails generate mailer UserMailer account_activation password_reset</div></pre></td></tr></table></figure><h2 id="uploader"><a href="#uploader" class="headerlink" title="uploader"></a>uploader</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rails generate uploader Picture</div></pre></td></tr></table></figure><h2 id="页面操作"><a href="#页面操作" class="headerlink" title="页面操作"></a>页面操作</h2><h2 id="link-to"><a href="#link-to" class="headerlink" title="link_to"></a>link_to</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;%= link_to &quot;(forgot password)&quot;, new_password_reset_path %&gt;</div><div class="line">&lt;%= link_to &quot;Reset password&quot;, edit_password_reset_url(@user.reset_token, email: @user.email) %&gt;</div></pre></td></tr></table></figure><h2 id="update-attribute"><a href="#update-attribute" class="headerlink" title="update_attribute"></a>update_attribute</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">update_attribute(:name, &quot;El Duderino&quot;)</div><div class="line">update_columns(activated: true, activated_at: Time.zone.now)</div></pre></td></tr></table></figure><h2 id="assert"><a href="#assert" class="headerlink" title="assert_*"></a>assert_*</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">assert_select &quot;div&quot;&lt;div&gt;foobar&lt;/div&gt;</div><div class="line">assert_select &quot;div&quot;, &quot;foobar&quot;&lt;div&gt;foobar&lt;/div&gt;</div><div class="line">assert_select &quot;div.nav&quot;&lt;div class=&quot;nav&quot;&gt;foobar&lt;/div&gt;</div><div class="line">assert_select &quot;div#profile&quot;&lt;div id=&quot;profile&quot;&gt;foobar&lt;/div&gt;</div><div class="line">assert_select &quot;div[name=yo]&quot;&lt;div name=&quot;yo&quot;&gt;hey&lt;/div&gt;</div><div class="line">assert_select &quot;a[href=?]&quot;, &apos;/&apos;, count: 1&lt;a href=&quot;/&quot;&gt;foo&lt;/a&gt;</div><div class="line">assert_select &quot;a[href=?]&quot;, &apos;/&apos;, text: &quot;foo&quot;&lt;a href=&quot;/&quot;&gt;foo&lt;/a&gt;</div><div class="line">assert_select &quot;input[name=email][type=hidden][value=?]&quot;, user.email</div><div class="line">&lt;input id=&quot;email&quot; name=&quot;email&quot; type=&quot;hidden&quot; value=&quot;michael@example.com&quot; /&gt;</div><div class="line"></div><div class="line">assert_template &apos;static_pages/home&apos;</div><div class="line">assert_response :success</div><div class="line">assert_equal full_title, &quot;Ruby on Rails&quot;# 判断两个值相等，full_title是一个方法</div></pre></td></tr></table></figure><h2 id="other"><a href="#other" class="headerlink" title="other"></a>other</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">app/assets/stylesheets/application.css</div><div class="line">*= require_tree .</div><div class="line">会把 app/assets/stylesheets 目录中的所有 CSS 文件（包含子目录中的文件）都引入应用的 CSS 文件。</div><div class="line">*= require_self</div><div class="line">会把 application.css 这个文件中的 CSS 也加载进来。</div></pre></td></tr></table></figure><p>下载一个图片</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -o app/assets/images/rails.png -OL railstutorial-china.org/assets/images/rails.png</div></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>http://yoursite.com/2017/05/11/ruby-on-rails-note/#disqus_thread</comments>
    </item>
    
  </channel>
</rss>
